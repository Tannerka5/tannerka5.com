---
import BaseLayout from '../../layouts/BaseLayout.astro';
import BlogGrid from '../../components/blog/BlogGrid';
import { getBlogPostsPublic } from '../../lib/api-server';

// Fetch blog posts from API
let publishedPosts: any[] = [];
try {
  const response = await getBlogPostsPublic();
  publishedPosts = (response.posts || []).filter((post: any) => post.published);
} catch (error) {
  console.error('Failed to fetch blog posts:', error);
  // Fallback to empty array if API fails
  publishedPosts = [];
}
---

<BaseLayout 
  title="Blog | Tanner Atkinson"
  description="Technical articles and insights on web development, cloud deployment, and software engineering."
>
  <BlogGrid client:visible posts={publishedPosts} />
</BaseLayout>
